PUSH BP
MOV BP,SP
MOV R1,6
MOV R0,BP
SUB R0,R1
MOV R0,[R0]
MOV R5,R0
MOV R1,R0
MOV R2, "Alloc"
EQ R1, R2
JZ R1, 42
MOV R0, [2040]
MOV R1, [R0]
MOV [2040], R1
MOV R1, BP
MOV R2, 2
SUB R1, R2
MOV [R1], R0
MOV BP, [SP]
POP R0
RET
MOV R1,R5
MOV R2, "Free"
EQ R1, R2
JZ R1, 70
MOV R0, 5
MOV R1, BP
SUB R1, R0
MOV R0, [R1]
MOV R1, [2040]
MOV [2040], R0
MOV [R0], R1
MOV BP, [SP]
POP R0
RET
MOV R1,R5
MOV R2, "Heapset"
EQ R1, R2
JZ R1, 424
MOV R0,1024
MOV R1,1
MOV [R0],-1
ADD R0,R1
MOV R2,2047
GE R2,R0
JZ R2,94
JMP 82
MOV R0,1024
MOV R1,1032
MOV R3,8
MOV [R0],R1
ADD R1,R3
ADD R0,R3
MOV R2,2047
GE R2,R0
JZ R2,114
JMP 100
MOV [2032],-1
MOV [2040],1024
MOV BP, [SP]
POP R0
RET
MOV R0,R7
PUSH R0
MOV R1,BP
MOV R0,5
SUB R1,R0
MOV R0,[R1]
PUSH R0
ADD R1,1
MOV R0,[R1]
PUSH R0
ADD R1,1
MOV R0,[R1]
PUSH R0
PUSH R0
MOV R1,R5
MOV R0, "Create"
EQ R0,R1
JNZ R0, 334
MOV R0, "Delete"
EQ R0,R1
JNZ R0, 334
MOV R0, "Seek"
EQ R0,R1
JNZ R0, 338
MOV R0, "Open"
EQ R0,R1
JNZ R0, 338
MOV R0, "Close"
EQ R0,R1
JNZ R0, 338
MOV R0, "Read"
EQ R0,R1
JNZ R0, 342
MOV R0, "Write"
EQ R0,R1
JNZ R0, 346
MOV R0, "Fork"
EQ R0,R1
JNZ R0, 350
MOV R0, "Exec"
EQ R0,R1
JNZ R0, 354
MOV R0, "Exit"
EQ R0,R1
JNZ R0, 358
MOV R0, "Getpid"
EQ R0,R1
JNZ R0, 362
MOV R0, "Getppid"
EQ R0,R1
JNZ R0, 362
MOV R0, "Wait"
EQ R0,R1
JNZ R0, 362
MOV R0, "Signal"
EQ R0,R1
JNZ R0, 362
MOV R0, "Logout"
EQ R0,R1
JNZ R0, 366
MOV R0, "Semget"
EQ R0,R1
JNZ R0, 370
MOV R0, "Semrelease"
EQ R0,R1
JNZ R0, 370
MOV R0, "SemLock"
EQ R0,R1
JNZ R0, 374
MOV R0, "SemUnLock"
EQ R0,R1
JNZ R0, 374
MOV R0, "Shutdown"
EQ R0,R1
JNZ R0, 378
MOV R0, "Newusr"
EQ R0,R1
JNZ R0, 382
MOV R0, "Remusr"
EQ R0,R1
JNZ R0, 382
MOV R0, "Setpwd"
EQ R0,R1
JNZ R0, 382
MOV R0, "Getuname"
EQ R0,R1
JNZ R0, 382
MOV R0, "Getuid"
EQ R0,R1
JNZ R0, 382
MOV R0, "Login"
EQ R0,R1
JNZ R0, 386
MOV R0, "Test0"
EQ R0,R1
JNZ R0, 390
MOV R0, "Test1"
EQ R0,R1
JNZ R0, 390
MOV R0, "Test2"
EQ R0,R1
JNZ R0, 390
MOV R0, "Test3"
EQ R0,R1
JNZ R0, 390
INT 4
JMP 392
INT 5
JMP 392
INT 6
JMP 392
INT 7
JMP 392
INT 8
JMP 392
INT 9
JMP 392
INT 10
JMP 392
INT 11
JMP 392
INT 12
JMP 392
INT 13
JMP 392
INT 14
JMP 392
INT 15
JMP 392
INT 16
JMP 392
INT 17
JMP 392
INT 18
MOV R1,BP
MOV R0,5
ADD R1,R0
MOV R2,BP
MOV R0,2
SUB R2,R0
MOV R3,[R1]
MOV [R2],R3
POP R0
POP R0
POP R0
POP R0
POP R0
MOV BP,[SP]
POP R0
RET
MOV R1,R5
MOV R2, "Create"
EQ R1, R2
JZ R1, 436
MOV R7,1
JMP 124
MOV R1,R5
MOV R2, "Delete"
EQ R1, R2
JZ R1, 448
MOV R7,4
JMP 124
MOV R1,R5
MOV R2, "Seek"
EQ R1, R2
JZ R1, 460
MOV R7,6
JMP 124
MOV R1,R5
MOV R2, "Open"
EQ R1, R2
JZ R1, 472
MOV R7,2
JMP 124
MOV R1,R5
MOV R2, "Close"
EQ R1, R2
JZ R1, 484
MOV R7,3
JMP 124
MOV R1,R5
MOV R2, "Read"
EQ R1, R2
JZ R1, 496
MOV R7,7
JMP 124
MOV R1,R5
MOV R2, "Write"
EQ R1, R2
JZ R1, 508
MOV R7,5
JMP 124
MOV R1,R5
MOV R2, "Fork"
EQ R1, R2
JZ R1, 520
MOV R7,8
JMP 124
MOV R1,R5
MOV R2, "Exec"
EQ R1, R2
JZ R1, 532
MOV R7,9
JMP 124
MOV R1,R5
MOV R2, "Exit"
EQ R1, R2
JZ R1, 544
MOV R7,10
JMP 124
MOV R1,R5
MOV R2, "Getpid"
EQ R1, R2
JZ R1, 556
MOV R7,11
JMP 124
MOV R1,R5
MOV R2, "Getppid"
EQ R1, R2
JZ R1, 568
MOV R7,12
JMP 124
MOV R1,R5
MOV R2, "Wait"
EQ R1, R2
JZ R1, 580
MOV R7,13
JMP 124
MOV R1,R5
MOV R2, "Signal"
EQ R1, R2
JZ R1, 592
MOV R7,14
JMP 124
MOV R1,R5
MOV R2, "Logout"
EQ R1, R2
JZ R1, 604
MOV R7,28
JMP 124
MOV R1,R5
MOV R2, "Semget"
EQ R1, R2
JZ R1, 616
MOV R7,17
JMP 124
MOV R1,R5
MOV R2, "Semrelease"
EQ R1, R2
JZ R1, 628
MOV R7,18
JMP 124
MOV R1,R5
MOV R2, "SemLock"
EQ R1, R2
JZ R1, 640
MOV R7,19
JMP 124
MOV R1,R5
MOV R2, "SemUnLock"
EQ R1, R2
JZ R1, 652
MOV R7,20
JMP 124
MOV R1,R5
MOV R2, "Shutdown"
EQ R1, R2
JZ R1, 664
MOV R7,21
JMP 124
MOV R1,R5
MOV R2, "Newusr"
EQ R1, R2
JZ R1, 676
MOV R7,22
JMP 124
MOV R1,R5
MOV R2, "Remusr"
EQ R1, R2
JZ R1, 688
MOV R7,23
JMP 124
MOV R1,R5
MOV R2, "Setpwd"
EQ R1, R2
JZ R1, 700
MOV R7,24
JMP 124
MOV R1,R5
MOV R2, "Getuname"
EQ R1, R2
JZ R1, 712
MOV R7,25
JMP 124
MOV R1,R5
MOV R2, "Getuid"
EQ R1, R2
JZ R1, 724
MOV R7,26
JMP 124
MOV R1,R5
MOV R2, "Login"
EQ R1, R2
JZ R1, 736
MOV R7,27
JMP 124
MOV R1,R5
MOV R2, "Test0"
EQ R1, R2
JZ R1, 748
MOV R7,-1
JMP 124
MOV R1,R5
MOV R2, "Test1"
EQ R1, R2
JZ R1, 760
MOV R7,-2
JMP 124
MOV R1,R5
MOV R2, "Test2"
EQ R1, R2
JZ R1, 772
MOV R7,-3
JMP 124
MOV R1,R5
MOV R2, "Test3"
EQ R1, R2
JZ R1, 784
MOV R7,-4
JMP 124
RET
